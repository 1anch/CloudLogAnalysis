---

copyright:
  years: 2017
lastupdated: "2017-07-19"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# ログ保存ポリシーの構成
{: #configuring_retention_policy}

Log Collection 内でログが保持される最大日数を定義する保存ポリシーを表示および構成するには、コマンド **cf logging option** を使用します。デフォルトでは、ログは 30 日間保存されます。保存期間を過ぎると、ログは自動的に削除されます。デフォルトでは、保存ポリシーは無効にされます。
{:shortdesc}

複数の保存ポリシーをアカウントに定義できます。1 つのグローバル・アカウント・ポリシーと、個々のスペース・ポリシーを保有することができます。アカウント・レベルで設定する保存ポリシーは、ログを保持できる最大日数を設定します。アカウント・レベルの期間よりも長い期間のスペース保存ポリシーを設定した場合、そのスペースに構成した最新のポリシーが、適用されるポリシーになります。 


## スペースのログ保存ポリシーの無効化
{: #disable_retention_policy_space}

保存ポリシーを無効化するには、以下のステップを実行します。

1. ログ保存ポリシーを設定したい、{{site.data.keyword.Bluemix_notm}} 地域、組織、およびスペースにログインします。 

    例えば、米国南部地域にログインするには、以下のコマンドを実行します。
	
	```
    cf login -a https://api.ng.bluemix.net
    ```
    {: codeblock}
    
2. 保存期間を無効にするため、保存期間を **-1** に設定します。コマンドを実行します。

    ```
    cf logging option -r -1
    ```
    {: codeblock}
    
**例**
    
例えば、ID *d35da1e3-b345-475f-8502-cfgh436902a3* のスペースの保存期間を無効にするには、以下のコマンドを実行します。

```
cf logging option -r -1
```
{: codeblock}

出力は次のとおりです。

```
+--------------------------------------+-----------+
|               SPACEID                | RETENTION |
+--------------------------------------+-----------+
| d35da1e3-b345-475f-8502-cfgh436902a3 |        -1 |
+--------------------------------------+-----------+
```
{: screen} 



## スペースのログ保存ポリシーの確認
{: #check_retention_policy_space}

{{site.data.keyword.Bluemix_notm}} スペースに設定されている保存期間を取得するには、以下のステップを実行します。

1. ログ保存ポリシーを設定したい、{{site.data.keyword.Bluemix_notm}} 地域、組織、およびスペースにログインします。 

    例えば、米国南部地域にログインするには、以下のコマンドを実行します。
	
	```
    cf login -a https://api.ng.bluemix.net
    ```
    {: codeblock}
    
2. 保存期間を取得します。コマンドを実行します。

    ```
    cf logging option
    ```
    {: codeblock}

    出力は次のとおりです。

    ```
    +--------------------------------------+-----------+
    |               SPACEID                | RETENTION |
    +--------------------------------------+-----------+
    | d35da1e3-b345-475f-8502-cfgh436902a3 |        30 |
    +--------------------------------------+-----------+
    ```
    {: screen}
    

## アカウントのすべてのスペースのログ保存ポリシーの確認
{: #check_retention_policy_account}

アカウントの各 {{site.data.keyword.Bluemix_notm}} スペースに設定されている保存期間を取得するには、以下のステップを実行します。

1. ログ保存ポリシーを設定したい、{{site.data.keyword.Bluemix_notm}} 地域、組織、およびスペースにログインします。 

    例えば、米国南部地域にログインするには、以下のコマンドを実行します。
	
	```
    cf login -a https://api.ng.bluemix.net
    ```
    {: codeblock}
    
2. アカウントの各スペースの保存期間を取得します。コマンドを実行します。

    ```
    cf logging option -a
    ```
    {: codeblock}

    出力は次のとおりです。

    ```
    +--------------------------------------+-----------+
    |               SPACEID                | RETENTION |
    +--------------------------------------+-----------+
    | d35da1e3-b345-475f-8502-cfgh436902a3 |        30 |
    +--------------------------------------+-----------+
    | fdew45e3-b345-4365-8502-cfghrfthy5a3 |        30 |
    +--------------------------------------+-----------+
    ```
    {: screen}
    

## アカウント・レベルのログ保存ポリシーの設定
{: #set_retention_policy_space}

{{site.data.keyword.Bluemix_notm}} アカウントの保存期間を表示するには、以下のステップを実行します。

1. ログ保存ポリシーを設定したい、{{site.data.keyword.Bluemix_notm}} 地域、組織、およびスペースにログインします。 

    例えば、米国南部地域にログインするには、以下のコマンドを実行します。
	
	```
    cf login -a https://api.ng.bluemix.net
    ```
    {: codeblock}
    
2. 保存期間を設定します。コマンドを実行します。

    ```
    cf logging option -r *Number_of_days* - a
    ```
    {: codeblock}
    
    ここで、*Number_of_days* は、ログを保持する日数を定義する整数です。 
    
    
**例**
    
例えば、アカウントのすべてのタイプのログを 15 日間だけ保持するには、次のコマンドを実行します。

```
cf logging option -r 15 -a
```
{: codeblock}

出力では、以下のように、保存期間についての情報を含む項目がアカウントのスペースごとにリストされます。

```
+--------------------------------------+-----------+
|               SPACEID                | RETENTION |
+--------------------------------------+-----------+
| d35da1e3-b345-475f-8502-cfgh436902a3 |        15 |
+--------------------------------------+-----------+
| fdew45e3-b345-4365-8502-cfghrfthy5a3 |        30 |
+--------------------------------------+-----------+
```
{: screen}

## スペースのログ保存ポリシーの設定
{: #set_retention_policy_account}

{{site.data.keyword.Bluemix_notm}} スペースの保存期間を表示するには、以下のステップを実行します。

1. ログ保存ポリシーを設定したい、{{site.data.keyword.Bluemix_notm}} 地域、組織、およびスペースにログインします。 

    例えば、米国南部地域にログインするには、以下のコマンドを実行します。
	
	```
    cf login -a https://api.ng.bluemix.net
    ```
    {: codeblock}
    
2. 保存期間を設定します。コマンドを実行します。

    ```
    cf logging option -r *Number_of_days*
    ```
    {: codeblock}
    
    ここで、*Number_of_days* は、ログを保持する日数を定義する整数です。
    
    
**例**
    
例えば、スペースで使用可能なログを 1 年間保持するには、次のコマンドを実行します。

```
cf logging option -r 365
```
{: codeblock}

出力は次のとおりです。

```
+--------------------------------------+-----------+
|               SPACEID                | RETENTION |
+--------------------------------------+-----------+
| d35da1e3-b345-475f-8502-cfgh436902a3 |       365 |
+--------------------------------------+-----------+
```
{: screen}


